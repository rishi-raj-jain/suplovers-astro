---
import { getRelativeLocaleUrl } from "astro:i18n";
import { getLangFromUrl, useTranslationsForRoutes } from "../i18n/utils";
import { Image } from "astro:assets";
import TourCard from "../components/TourCard.astro";
import Hero from "../components/Hero.astro";
import Layout from "../layouts/Layout.astro";
import ButtonWhatsApp from "../components/ButtonWhatsApp.astro";

const { data, tours } = Astro.props;

const lang = getLangFromUrl(Astro.url);
const path = useTranslationsForRoutes(lang);
---

<Layout>
  <Hero data={data.hero} />

  <!-- tours section -->
  <section class="bg-background_cyan-500 py-20 tours-section">
    <div class="container mx-auto w-11/12">
      <div class="pb-6 pt-12">
        <h2
          class="border-b border-dashed border-yellow-500 font-titles inline-block leading-normal ml-4 text-2xl text-yellow-500 tracking-wide uppercase sm:text-4xl"
        >
          {data.tours.heading}
        </h2>
        <div class="ms-4 inline-block">
          <ButtonWhatsApp data={data.tours} bgColor="bg-yellow-500" />
        </div>
      </div>
      <div class="mx-auto px-4">
        <div class="flex flex-wrap -mx-4">
          {tours.map((tour) => <TourCard tour={tour} />)}

          <div class="mb-5 px-4 w-full md:w-1/2 xl:w-1/4">
            <div
              class="bg-dark_cyan-600 flex flex-col h-full items-center justify-center px-3 py-10 shadow-xl text-center"
            >
              <a
                href={getRelativeLocaleUrl(lang, path("tours"))}
                class="bg-transparent border border-opacity-30 border-solid border-yellow-500 font-paragraphs font-thin px-4 py-2 rounded-lg shadow-2xl text-9xl text-yellow-400 uppercase"
                >+</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-10">
      <div class="text-center">
        <ButtonWhatsApp data={data.tours} bgColor="bg-yellow-500" />
      </div>
    </div>

    <!--classes section  -->
  </section><section class="bg-beige-500 classes">
    <div class="flex flex-col mx-auto py-20 w-10/12 lg:flex-row">
      <div
        class="flex flex-col justify-center pl-0 pr-5 py-10 uppercase w-full lg:w-2/5"
      >
        <h4
          class="font-thin decoration-0 decoration-lime_green-500 font-paragraphs text-lime_green-700 underline underline-offset-8"
        >
          {data.classes.subheading}
        </h4>
        <h3
          class="font-titles font-extrabold mt-5 text-5xl text-background_cyan-500 sm:text-6xl"
        >
          {data.classes.heading}
          <span class="block">{data.classes.heading_span}&nbsp;</span>
        </h3>
        <p class="mt-3 text-dark_cyan-500 w-5/6 font-thin">
          {data.classes.paragraph}
        </p>
        <a
          href={data.classes.button_link}
          class="bg-lime_green-600 flex-shrink-0 font-medium font-paragraphs mt-6 px-4 py-2 rounded-lg self-start text-white"
          >{data.classes.button_text}
        </a>
      </div>
      <div
        class="classes-photos-container flex overflow-hidden rounded-xl w-full lg:w-3/5"
      >
        <div class="w-1/3">
          <Image
            src={data.classes.image_1.src}
            alt={data.classes.image_1.alt}
            class="h-full object-cover w-full"
          />
        </div>
        <div class="w-1/3">
          <Image
            src={data.classes.image_2.src}
            alt={data.classes.image_2.alt}
            class="h-full object-cover w-full"
          />
        </div>
        <div class="w-1/3">
          <Image
            src={data.classes.image_3.src}
            alt={data.classes.image_3.alt}
            class="h-full object-cover w-full"
          />
        </div>
      </div>
    </div>

    <!-- rentals section -->
  </section><section class="alquileres bg-dark_cyan-500 py-20">
    <div class="container mx-auto w-11/12 md:w-9/12 lg:w-10/12 xl:w-8/12">
      <div class="pb-6 pt-12">
        <h2
          class="border-b border-dashed border-yellow-500 font-titles inline-block leading-normal ml-4 text-3xl text-yellow-500 tracking-wide uppercase sm:text-4xl"
        >
          {data.rentals.heading}
        </h2>
      </div>
      <div class="container">
        <div class="-mx-4 flex flex-wrap">
          {
            data.rentals.cards.map((card) => (
              <div class="mb-5 px-2 w-full md:w-1/2 lg:w-1/4">
                <div class="relative rental-card shadow shadow-background_cyan-500 w-full">
                  <Image
                    src={card.image}
                    alt="Alquiler de Kayak"
                    class="absolute h-full left-0 object-cover top-0 w-full"
                  />
                  <div class="absolute bg-opacity-40 bg-soft_yellow-500 bottom-0 flex flex-col h-1/3 justify-around left-0 w-full">
                    <h3 class="font-titles drop-shadow-2xl text-background_cyan-500 text-center text-xl uppercase">
                      {card.duration}
                    </h3>
                    <p class="font-bold mt-2 text-background_cyan-500 text-center tracking-wide">
                      {card.cost}{" "}
                    </p>
                    <div class="mb-2 text-center">
                      <a
                        href={card.button_link}
                        class="inline-block uppercase bg-yellow-500 font-medium font-paragraphs px-4 py-2 rounded-lg"
                      >
                        {card.button_text}
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            ))
          }

          <div class="mb-5 px-2 w-full md:w-1/2 lg:w-1/4">
            <div
              class="relative rental-card shadow shadow-background_cyan-500 w-full"
            >
              <div
                class="absolute bg-background_cyan-500 bg-opacity-40 bottom-0 flex flex-col h-full justify-around left-0 w-full"
              >
                <div class="mb-2 text-center">
                  <a
                    href={getRelativeLocaleUrl(lang, path("rentals"))}
                    class="bg-transparent border border-opacity-30 border-solid border-yellow-500 font-paragraphs font-thin px-4 py-2 rounded-lg shadow-2xl text-9xl text-yellow-400 uppercase"
                    >+</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-10 text-center">
      <ButtonWhatsApp data={data.tours} bgColor="bg-yellow-500" />
    </div>
  </section>
</Layout>

<style>
  .classes-photos-container {
    //height: 80vh;
    box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.25);
  }

  .rental-card {
    height: 450px;
  }

  @media (min-width: 640px) {
    .rental-card {
      height: 600px;
    }
  }

  @media (min-width: 1024px) {
    .rental-card {
      height: 70vh;
    }
  }
</style>
